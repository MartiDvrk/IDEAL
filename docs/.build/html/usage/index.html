
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>User Manual &#8212; IDEAL IDEAL 1.0, February 15, 2021 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="DICOM specification" href="../dicomspecs/index.html" />
    <link rel="prev" title="Commissioning" href="../commissioning/index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../dicomspecs/index.html" title="DICOM specification"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../commissioning/index.html" title="Commissioning"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">IDEAL IDEAL 1.0, February 15, 2021 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="user-manual">
<h1>User Manual<a class="headerlink" href="#user-manual" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-ideal-workflow">
<span id="workflow-label"></span><h2>The IDEAL workflow<a class="headerlink" href="#the-ideal-workflow" title="Permalink to this headline">¶</a></h2>
<div class="section" id="an-independent-dose-calculation-with-ideal">
<h3>An independent dose calculation with IDEAL<a class="headerlink" href="#an-independent-dose-calculation-with-ideal" title="Permalink to this headline">¶</a></h3>
<p>There are different user interfaces for IDEAL, but the basic workflow is always as follows:</p>
<ul class="simple">
<li>User starts user interface with username and role</li>
<li>User provides DICOM input data (CT, RS, RP, RD)</li>
<li>User chooses MC settings:<ul>
<li>required: statistical goal (number of primaries, uncertainty, time out, or a combination of these)</li>
<li>required: CT protocol <a class="footnote-reference" href="#ctprotocol" id="id1">[1]</a></li>
<li>optional: material overrides (default: only <code class="docutils literal notranslate"><span class="pre">G4_AIR</span></code> for volume outside of external)</li>
<li>optional: spatial resolution overrides (default: same as TPS dose)</li>
<li>optional: which beams to simulate (default: all of them)</li>
</ul>
</li>
<li>GATE-RTion Simulation runs for a couple of hours on a cluster (actual runtime depends on many factors)</li>
<li>Beam dose distributions are exported by IDEAL as DICOM files (and MHD format, if configured that way)</li>
<li>User analyzes and evaluates dose distributions using third party tools (e.g. <a class="reference internal" href="../index.html#verisoft" id="id2">[VeriSoft]</a> or a TPS like <a class="reference internal" href="../index.html#raystation" id="id3">[RayStation]</a>)</li>
</ul>
</div>
<div class="section" id="longer-term-work-flow">
<h3>Longer term work flow<a class="headerlink" href="#longer-term-work-flow" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>You work in an proton/ion beam therapy clinic and decide that Geant4-based independent dose calculations may be useful in your clinic.</li>
<li>A sufficiently powerful and extendible computer cluster is acquired, with resources as described in <a class="reference internal" href="../installation/index.html#sysreqs-label"><span class="std std-ref">System requirements</span></a>.</li>
<li>IDEAL is installed on this cluster as described in <a class="reference internal" href="../installation/index.html#ideal-install-label"><span class="std std-ref">IDEAL installation</span></a> by an employee with an admin role.</li>
<li>The medical physicist(s) with a “commissioning” role develops the beam model, installs the CT Hounsfield lookup tables and edits the system configuration file with correct values (see <a class="reference internal" href="../commissioning/index.html#commissioning-label"><span class="std std-ref">Commissioning</span></a>).</li>
<li>The medical physics team runs a series of tests to make sure that the installation went well. This should probably include:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Integrated depth dose curves for several energies in water (using a CT of a water phantom)<ul>
<li>compare with measurements (both the shape of the curve and the absolute dose)</li>
<li>determine/adjust correction factors</li>
</ul>
</li>
<li>Beam profiles in air, compare with measurements</li>
<li>Example treatment plans from recent clinical practice:<ul>
<li>Check level of agreement, find any systematic offsets in dose or in geometry</li>
<li>Determine cluster performance:<ul>
<li>how does the simulation runtime vary with statistical goals and with complexity of the plan (number of beams, number of spots, radiation type, etc)</li>
<li>are there any crashes (e.g. due to insufficient memory)?</li>
</ul>
</li>
<li>Check all combinations of beamline, radiation type, passive elements and CT protocol that you expect to use</li>
</ul>
</li>
<li><strong>You are yourself responsible for the correct use of IDEAL and any consequences of using its results. If you intend to use IDEAL clinically, then you need follow all procedures for using “Software Of Unknown Provenance” (SOUP). IDEAL is NOT a medically certified product.</strong></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="6">
<li>Use IDEAL to perform independent dose calculations in your clinic or for research.<ul>
<li>The commissioning physicist should make sure that the commissioning data are correct and up to date. Whenever new beamlines or CT protocols are introduced or the existing ones are changing, the commissioning data should be updated.</li>
<li>The admin should make sure that the disks do not fill up, by regularly purging data from older simulations.</li>
<li>Periodically review the performance of your IDEAL installation:<ul>
<li>with experience you may improve some choices made during installation and commissioning</li>
<li>buy more cluster nodes, more RAM</li>
<li>share your observations, experiences and ideas for improvement with the IDEAL development team</li>
</ul>
</li>
</ul>
</li>
</ol>
<table class="docutils footnote" frame="void" id="ctprotocol" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>The CT protocol selection may be automated in later release, but the users will still be able to override the protocol.</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="requirements-and-limitations-on-dicom-input">
<span id="dicom-requirements-label"></span><h2>Requirements and limitations on DICOM input<a class="headerlink" href="#requirements-and-limitations-on-dicom-input" title="Permalink to this headline">¶</a></h2>
<p>What kind of treatment plans can be studied using IDEAL?</p>
<ul class="simple">
<li>The input treatment plan should be a plan for scanning ion beam treatment. IDEAL is <strong>not</strong> designed to work for e.g. passive scattering proton therapy and conventional radiation therapy with photons.</li>
<li>IDEAL takes the DICOM plan file as input, and expects to find the following DICOM files in the same directory (or in subfolders):
* Structure set file, with the <code class="docutils literal notranslate"><span class="pre">SOP</span> <span class="pre">Instance</span> <span class="pre">UID</span></code> that is referred to by the treatment plan,
* CT files, with the <code class="docutils literal notranslate"><span class="pre">Series</span> <span class="pre">Instance</span> <span class="pre">UID</span></code> that is referred to by structure set,
* TPS dose file(s), which refer to the <code class="docutils literal notranslate"><span class="pre">SOP</span> <span class="pre">Instance</span> <span class="pre">UID</span></code> of the treatment plan.</li>
<li>Hounsfield lookup tables for the protocol that was used for the input CT should be available under <a class="reference internal" href="../commissioning/index.html#cthlut-label"><span class="std std-ref">CT protocol Hounsfield Lookup tables</span></a> in the <a class="reference internal" href="../installation/index.html#commissioningdir"><span class="std std-ref">Commissioning Data Directory</span></a>.</li>
<li>Beam line model for the ‘Treatment Machine’ should be made available under <a class="reference internal" href="../commissioning/index.html#beamline-model-label"><span class="std std-ref">Beam line modelling</span></a> in the <a class="reference internal" href="../installation/index.html#commissioningdir"><span class="std std-ref">Commissioning Data Directory</span></a>.</li>
<li>In case multiple TPS dose files are found (physical and/or effective dose, dose per beam and/or dose for the whole beamset) it is important that all have the same geometry (origin coordinates, voxel size a.k.a. “spacing”, number of voxels in each dimension a.k.a. “image size”).</li>
</ul>
<p>Full details of how IDEAL uses DICOM can be found in the <a class="reference internal" href="../dicomspecs/index.html#dicom-specs-label"><span class="std std-ref">DICOM specification</span></a>.</p>
</div>
<div class="section" id="details-per-user-interface">
<h2>Details per user interface<a class="headerlink" href="#details-per-user-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="command-line-interface-clidc-py">
<span id="cmdline-interface-label"></span><h3>Command line interface: <code class="docutils literal notranslate"><span class="pre">clidc.py</span></code><a class="headerlink" href="#command-line-interface-clidc-py" title="Permalink to this headline">¶</a></h3>
<p>The name <code class="docutils literal notranslate"><span class="pre">clidc</span></code> stands for: <strong>C</strong>ommand <strong>L</strong>ine interface for <strong>I</strong>ndependent <strong>D</strong>ose <strong>C</strong>alculation with “IDEAL”.</p>
<p>The command is run in a bash shell environment (or equivalent, a Z-shell probably also works).
In order to set up the environment to make it work, the user should first run
<code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">/path/to/IDEAL/install/bin/IDEAL_env.sh</span></code>, where <code class="docutils literal notranslate"><span class="pre">/path/to/IDEAL/install</span></code>
should obviously be replaced with the actual directory path where IDEAL
was installed <a class="footnote-reference" href="#pipfootnote" id="id4">[2]</a>.</p>
<p>Ways to call this script:</p>
<blockquote>
<div><ul>
<li><p class="first">Get help, remind yourself of all the possible options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">clidc</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
</li>
<li><p class="first">Query which hardware is supported (by the commissioning physicist) in the current installation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># print the list of supported CT protocols, modelled phantoms, override materials and beamline names.</span>
<span class="n">clidc</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">C</span> <span class="o">-</span><span class="n">P</span> <span class="o">-</span><span class="n">M</span> <span class="o">-</span><span class="n">Z</span>
</pre></div>
</div>
</li>
<li><p class="first">Query a plan:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># query a specific treatment plan, to print to stdout:</span>
<span class="c1"># * list all ROIs in (the structure set used by) a plan</span>
<span class="c1"># * the default size (number of voxels) of the dose distribution</span>
<span class="c1"># * the list of beam names in the plan</span>
<span class="n">clidc</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">R</span> <span class="o">-</span><span class="n">X</span> <span class="o">-</span><span class="n">B</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">some</span><span class="o">/</span><span class="n">RP_treatment_plan</span><span class="o">.</span><span class="n">dcm</span>
</pre></div>
</div>
</li>
<li><p class="first">Configure &amp; submit a plan for independent dose calculation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># you need to provide at least one statistics goal and a treatment plan filepath</span>
<span class="c1"># you need to provide EITHER a CT protocol OR a phantom name</span>
<span class="c1"># tweaks are optional</span>
<span class="n">clidc</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">l</span> <span class="n">user_role</span> \
     <span class="p">[</span><span class="n">statistics</span> <span class="n">options</span><span class="p">]</span> \
     <span class="p">[</span> <span class="o">-</span><span class="n">c</span> <span class="n">CT_protocol</span> <span class="o">|</span> <span class="o">-</span><span class="n">p</span> <span class="n">phantom</span> <span class="p">]</span> \
     <span class="p">[</span> <span class="n">configure</span> <span class="n">tweaks</span> <span class="p">]</span> \
     <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">some</span><span class="o">/</span><span class="n">RP_treatment_plan</span><span class="o">.</span><span class="n">dcm</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>So there are basically four groups of options:</p>
<dl class="docutils">
<dt>General options (<code class="docutils literal notranslate"><span class="pre">lvd</span></code>)</dt>
<dd><p class="first">These options can be combined with any of the other options.</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-l</span></code>: “login” or “username and role”.
This option specifies the username and role under which you would like to run <code class="docutils literal notranslate"><span class="pre">clidc.py</span></code>. The username and role is part of the output dose files.
Some configuration options can only be used with <code class="docutils literal notranslate"><span class="pre">commissioning</span></code> role (e.g. make the beamline model than the default model for the <code class="docutils literal notranslate"><span class="pre">TreatmentMachine</span></code>).
The default value for <code class="docutils literal notranslate"><span class="pre">-l</span></code> is the Linux user name under which the <code class="docutils literal notranslate"><span class="pre">clidc.py</span></code> script is run.
User names are roles are configured in the <a class="reference internal" href="../commissioning/index.html#syscfgfile-label"><span class="std std-ref">System configuration file</span></a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">-v</span></code>: This option causes the <code class="docutils literal notranslate"><span class="pre">debug</span></code> level output of the query or job submission to be printed to standard output.
Default is to print only the <code class="docutils literal notranslate"><span class="pre">info</span></code> level (which is already quite verbose). The verbose logging output can always be
read in the log file that is written for every invocation of <code class="docutils literal notranslate"><span class="pre">clidc.py</span></code> in the <a class="reference internal" href="../installation/index.html#logging-dir-label"><span class="std std-ref">logging</span></a> directory.</li>
<li><code class="docutils literal notranslate"><span class="pre">-s</span></code>: With this option you can run <code class="docutils literal notranslate"><span class="pre">clidc.py</span></code> with an alternative system configuration file. This can be useful for commissioning/research. Default system configuration file is the <code class="docutils literal notranslate"><span class="pre">cfg/system.cfg</span></code> file in the directory where IDEAL is installed.</li>
<li><code class="docutils literal notranslate"><span class="pre">-j</span></code>: Number of cores to use per beam. Default: the number of cores specified in the <a class="reference internal" href="../commissioning/index.html#syscfgfile-label"><span class="std std-ref">System configuration file</span></a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">-d</span></code>: This option is currently a no-op.  The intention is that when set, the temporary data generated by the simulations will not be compressed/deleted,
so that it remains available for diagnostics and debugging by the user/developer/researcher.
Currently, the temporary data are always compressed, unless the postprocessing script crashes before it gets to perform that operation.</li>
</ul>
</div></blockquote>
</dd>
<dt>Query options (with a uppercase letter: <code class="docutils literal notranslate"><span class="pre">BCMPRXZ</span></code>)</dt>
<dd><p class="first">These cause <code class="docutils literal notranslate"><span class="pre">clidc.py</span></code> to perform a query instead of a dose calculation.
These options <strong>cannot</strong> be combined with the following two groups of options (configuration tweaks and statistics goals).</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-B</span></code>: beam names in a treatment plan</li>
<li><code class="docutils literal notranslate"><span class="pre">-C</span></code>: available CT protocols (Hounsfield lookup tables)</li>
<li><code class="docutils literal notranslate"><span class="pre">-M</span></code>: available override materials</li>
<li><code class="docutils literal notranslate"><span class="pre">-P</span></code>: available phantom models</li>
<li><code class="docutils literal notranslate"><span class="pre">-R</span></code>: ROIs in (the structure set that is used by) a treatment plan</li>
<li><code class="docutils literal notranslate"><span class="pre">-X</span></code>: default dose resolution (number of voxels in each direction)</li>
<li><code class="docutils literal notranslate"><span class="pre">-Z</span></code>: available beamline models (useful for commissioning and research)</li>
</ul>
</div></blockquote>
</dd>
<dt>Statistical goal options (with a lowercase letter: <code class="docutils literal notranslate"><span class="pre">tnu</span></code>)</dt>
<dd><p class="first">These cause <code class="docutils literal notranslate"><span class="pre">clidc.py</span></code> to perform a dose calculation and <strong>cannot</strong> be combined with query options.</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-t</span></code>: maximum time to run (excluding queue waiting, pre- and post-processing time) in <strong>minutes</strong>.</li>
<li><code class="docutils literal notranslate"><span class="pre">-n</span></code>: minimum number of primary particles to simulate.</li>
<li><code class="docutils literal notranslate"><span class="pre">-u</span></code>: average uncertainty to reach (or better) in the voxels that have at least half the maximum dose.</li>
</ul>
</div></blockquote>
<p class="last">More details below.</p>
</dd>
<dt>Configuration options (with a lowercase letter: <code class="docutils literal notranslate"><span class="pre">bcmpxz</span></code>)</dt>
<dd><p class="first">These options change the way how <code class="docutils literal notranslate"><span class="pre">clidc.py</span></code> to perform a dose calculation
and <strong>cannot</strong> be combined with query options.  Note that for each uppercase
query option <code class="docutils literal notranslate"><span class="pre">BCMPXZ</span></code> that <em>queries</em> a quantity/property there is a
corresponding lowercase configuration option <code class="docutils literal notranslate"><span class="pre">bcmpxz</span></code> that <em>changes</em> the
value/setting of that quantity/property. (The information queried with <code class="docutils literal notranslate"><span class="pre">R</span></code> is used
in the <code class="docutils literal notranslate"><span class="pre">m</span></code> material override option, so there is not separate <code class="docutils literal notranslate"><span class="pre">r</span></code> tweak option.)</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">-b</span></code>: beam names to simulate (instead of all beams in the treatment plan)</li>
<li><code class="docutils literal notranslate"><span class="pre">-c</span></code>: CT protocols (Hounsfield lookup tables) to use</li>
<li><code class="docutils literal notranslate"><span class="pre">-m</span></code>: followed by one or more values of the form <code class="docutils literal notranslate"><span class="pre">ROINAME:MATERIALNAME</span></code>, to specify material overrides.</li>
<li><code class="docutils literal notranslate"><span class="pre">-p</span></code>: specify phantom to use INSTEAD of the CT</li>
<li><code class="docutils literal notranslate"><span class="pre">-x</span></code>: changes the dose resolution (number of voxels in each direction; the origin and physical size remain unchanged).</li>
<li><code class="docutils literal notranslate"><span class="pre">-f</span></code>: score dose on full CT resolution, do not resample to the TPS planning dose</li>
<li><code class="docutils literal notranslate"><span class="pre">-z</span></code>: use this beamline model for all beams in the plan (only available with commissioning and research roles)</li>
</ul>
</div></blockquote>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">-c</span></code> and <code class="docutils literal notranslate"><span class="pre">-p</span></code> are mutually exclusive, as are <code class="docutils literal notranslate"><span class="pre">-x</span></code> and <code class="docutils literal notranslate"><span class="pre">-f</span></code>.</p>
</dd>
</dl>
<p>Examples of all 7 possible combinations of the three statistical constraints/goals:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">n</span> <span class="mi">1000000</span><span class="p">:</span> <span class="n">stop</span> <span class="n">when</span> <span class="o">&gt;</span><span class="mi">1000000</span> <span class="n">primaries</span> <span class="n">were</span> <span class="n">simulated</span><span class="o">.</span>
<span class="o">-</span><span class="n">u</span> <span class="mf">1.5</span><span class="p">:</span> <span class="n">stop</span> <span class="n">when</span> <span class="n">average</span> <span class="n">statistical</span> <span class="n">uncertainty</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">high</span> <span class="n">dose</span> <span class="n">region</span> <span class="ow">is</span> <span class="o">&lt;</span><span class="mf">1.5</span><span class="o">%.</span>
<span class="o">-</span><span class="n">t</span> <span class="mi">18000</span><span class="p">:</span> <span class="n">stop</span> <span class="n">after</span> <span class="n">running</span> <span class="k">for</span> <span class="o">&gt;</span><span class="mi">5</span> <span class="n">hours</span><span class="o">.</span>
<span class="o">-</span><span class="n">n</span> <span class="mi">1000000</span> <span class="o">-</span><span class="n">u</span> <span class="mi">5</span><span class="p">:</span> <span class="n">run</span> <span class="o">&gt;</span><span class="mi">1000000</span> <span class="n">primaries</span><span class="p">,</span> <span class="ow">and</span> <span class="n">then</span> <span class="k">continue</span> <span class="n">running</span> <span class="n">until</span> <span class="o">&lt;</span><span class="mi">5</span><span class="o">%</span> <span class="n">uncertainty</span> <span class="ow">is</span> <span class="n">reached</span><span class="o">.</span>
<span class="o">-</span><span class="n">t</span> <span class="mi">18000</span> <span class="o">-</span><span class="n">u</span> <span class="mi">4</span><span class="p">:</span> <span class="k">try</span> <span class="n">to</span> <span class="n">reach</span> <span class="o">&lt;</span><span class="mi">4</span><span class="o">%</span> <span class="n">uncertainty</span><span class="p">,</span> <span class="n">but</span> <span class="n">stop</span> <span class="k">if</span> <span class="n">it</span> <span class="n">takes</span> <span class="o">&gt;</span><span class="mi">5</span> <span class="n">hours</span><span class="o">.</span>
<span class="o">-</span><span class="n">t</span> <span class="mi">18000</span> <span class="o">-</span><span class="n">n</span> <span class="mi">1000000</span><span class="p">:</span> <span class="k">try</span> <span class="n">to</span> <span class="n">simulate</span> <span class="o">&gt;</span><span class="mi">1000000</span> <span class="n">primaries</span><span class="p">,</span> <span class="n">but</span> <span class="n">stop</span> <span class="k">if</span> <span class="n">it</span> <span class="n">takes</span> <span class="n">longer</span> <span class="n">than</span> <span class="mi">5</span> <span class="n">hours</span><span class="o">.</span>
<span class="o">-</span><span class="n">t</span> <span class="mi">18000</span> <span class="o">-</span><span class="n">n</span> <span class="mi">1000000</span> <span class="o">-</span><span class="n">u</span> <span class="mf">2.0</span><span class="p">:</span> <span class="n">stop</span> <span class="n">after</span> <span class="mi">5</span> <span class="n">hours</span><span class="p">,</span> <span class="n">unless</span> <span class="n">the</span> <span class="n">goals</span> <span class="n">of</span> <span class="n">running</span> <span class="o">&gt;</span><span class="mi">1000000</span> <span class="n">primaries</span> <span class="n">AND</span> <span class="o">&lt;</span><span class="mi">2</span><span class="o">%</span> <span class="n">average</span> <span class="n">statistical</span> <span class="n">accuracy</span> <span class="n">have</span> <span class="n">been</span> <span class="n">reached</span> <span class="n">earlier</span><span class="o">.</span>
</pre></div>
</div>
<p>The constraints are not checked after every individually simulated primary.
Rather, they are checked periodically (e.g. every two minutes, this can be
configured). This means that the constraints will typically be exceeded by a
bit: you may get a couple of thousand primaries more than you asked for, the
simulation may keep running for a while after the timeout has expired and/or
the average statistical uncertainty may be slightly better than the goal.</p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Describe better how the average dose uncertainty is computed. There is some
explanation buried in the system configuration file docs, but that is in
the install/commissioning part. It should actually be explained in the
“usage” part of the manual.</p>
</div>
<table class="docutils footnote" frame="void" id="pipfootnote" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[2]</a></td><td>Once IDEAL has been fully “pip”-ified, this sourcing step might not be necessary any more.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="pyqt-interface">
<h3>PyQt interface<a class="headerlink" href="#pyqt-interface" title="Permalink to this headline">¶</a></h3>
<p>More details.</p>
</div>
<div class="section" id="research-interface">
<h3>Research interface<a class="headerlink" href="#research-interface" title="Permalink to this headline">¶</a></h3>
<p>More details.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../commissioning/index.html"
                        title="previous chapter">Commissioning</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../dicomspecs/index.html"
                        title="next chapter">DICOM specification</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../dicomspecs/index.html" title="DICOM specification"
             >next</a> |</li>
        <li class="right" >
          <a href="../commissioning/index.html" title="Commissioning"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">IDEAL IDEAL 1.0, February 15, 2021 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, MedAustron GmbH, ACMIT Gmbh and Medical University Vienna.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>